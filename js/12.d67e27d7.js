"use strict";(globalThis["webpackChunkopenaimart"]=globalThis["webpackChunkopenaimart"]||[]).push([[12],{1816:(e,t,n)=>{n.d(t,{H:()=>p,N$:()=>i});var o=n(7141),a=n(4043);const l={apiKey:"AIzaSyCZumWqJXcx7gedGaZ1c4qZdyZFeuQ1tMg",authDomain:"aoaiportal.firebaseapp.com",databaseURL:"https://aoaiportal-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"aoaiportal",storageBucket:"aoaiportal.appspot.com",messagingSenderId:"370281326669",appId:"1:370281326669:web:e04c79a6cbd442423f5404",measurementId:"G-1QXSTKNFCZ"},p=(0,o.ZF)(l),i=((0,a.IH)(app),getDatabase())},8341:(e,t,n)=>{n.d(t,{s:()=>p});var o=n(1809),a=function(e,t,n,o){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,l){function p(e){try{r(o.next(e))}catch(t){l(t)}}function i(e){try{r(o["throw"](e))}catch(t){l(t)}}function r(e){e.done?n(e.value):a(e.value).then(p,i)}r((o=o.apply(e,t||[])).next())}))};const l={engine:"text-davinci-003",preprompt:"This is a preprompt.",prompt:"This is a prompt.",result:"",temperature:.3,max_tokens:128,top_p:1,frequency_penalty:0,presence_penalty:0,stop:null,best_of:1,title:"Untitled",author_name:"",author_id:"",tags:null},p=(0,o.Q_)("oai",{state:()=>({gpt:{},apiInfo:{api_type:"azure",azure_openai_name:localStorage.getItem("azure_openai_name")||"",api_version:"2023-03-15-preview",api_key:localStorage.getItem("api_key")||""},chatgpt_tokens:0,promptId:""}),getters:{},actions:{resetGPT:function(){for(const e in l)this.gpt[e]=l[e]},fetchHtmlCode:function(e){var t;return a(this,void 0,void 0,(function*(){if(console.log("starting fetchGPT"),null===this.apiInfo.api_key)return void alert("api key is null");let n=null;n=this.gpt.stop,(null===(t=this.gpt.stop)||void 0===t?void 0:t.length)&&(n=this.gpt.stop);const o=yield fetch(`https://${this.apiInfo.azure_openai_name}.openai.azure.com/openai/deployments/text-davinci-003/completions?api-version=${this.apiInfo.api_version}`,{method:"POST",headers:{"Content-Type":"application/json","api-key":this.apiInfo.api_key},body:JSON.stringify({prompt:e,max_tokens:2048,temperature:0,top_p:1,frequency_penalty:0,presence_penalty:0,stop:null})}),a=yield o.json();return a.error?(console.log(a.error),void alert(a.error.message)):a.choices[0].text}))},fetchGPT:function(){return a(this,void 0,void 0,(function*(){if(console.log("starting fetchGPT"),null===this.apiInfo.api_key)return void alert("api key is null");let e=this.gpt.stop;console.log("stopValue",e),0===(null===e||void 0===e?void 0:e.length)&&(e=null);const t=yield fetch(`https://${this.apiInfo.azure_openai_name}.openai.azure.com/openai/deployments/${this.gpt.engine}/completions?api-version=${this.apiInfo.api_version}`,{method:"POST",headers:{"Content-Type":"application/json","api-key":this.apiInfo.api_key},body:JSON.stringify({prompt:this.gpt.preprompt+this.gpt.prompt,max_tokens:"string"==typeof this.gpt.max_tokens?parseInt(this.gpt.max_tokens):this.gpt.max_tokens,temperature:this.gpt.temperature,top_p:this.gpt.top_p,frequency_penalty:this.gpt.frequency_penalty,presence_penalty:this.gpt.presence_penalty,stop:e})}),n=yield t.json();if(n.error)return console.log(n.error),void alert(n.error.message);console.log(n),this.gpt.result=n.choices[0].text}))},fetchChatGPT:function(e){return a(this,void 0,void 0,(function*(){if(console.log("starting fetchGPT"),null===this.apiInfo.api_key)return void alert("api key is null");let t=this.gpt.stop;console.log("stopValue",t),0===(null===t||void 0===t?void 0:t.length)&&(t=null);const n=yield fetch(`https://${this.apiInfo.azure_openai_name}.openai.azure.com/openai/deployments/${this.gpt.engine}/chat/completions?api-version=${this.apiInfo.api_version}`,{method:"POST",headers:{"Content-Type":"application/json","api-key":this.apiInfo.api_key},body:JSON.stringify({messages:[{role:"system",content:this.gpt.preprompt}].concat(e),max_tokens:"string"==typeof this.gpt.max_tokens?parseInt(this.gpt.max_tokens):this.gpt.max_tokens,temperature:this.gpt.temperature,top_p:this.gpt.top_p,frequency_penalty:this.gpt.frequency_penalty,presence_penalty:this.gpt.presence_penalty,stop:t})}),o=yield n.json();return o.error?(console.log(o.error),void alert(o.error.message)):(console.log(o),this.chatgpt_tokens=o.usage.total_tokens,o.choices[0].message)}))},setLocalStorage:function(){localStorage.setItem("api_key",this.apiInfo.api_key),localStorage.setItem("azure_openai_name",this.apiInfo.azure_openai_name),alert("Saved to localStorage")}}})},9012:(e,t,n)=>{n.r(t),n.d(t,{default:()=>se});var o=n(9835),a=n(6970);const l=(0,o._)("div",{class:"text-h4 q-pa-md"},"Simple Web, API & Chatbot Deployment",-1),p={class:"q-gutter-y-md"},i=(0,o._)("div",{class:"text-h6"},"HTML Generator Prompt",-1),r=(0,o._)("div",{class:"text-h6"},"Generated HTML",-1),s=(0,o._)("div",{class:"text-h6"},"Deploy HTML",-1),c=["href"],m=(0,o._)("br",null,null,-1),u=(0,o._)("br",null,null,-1),d=(0,o._)("b",null,".env",-1),h=(0,o._)("code",{style:{display:"block","white-space":"pre-wrap",border:"solid"}},"docker run -d -p 80:80 --env-file .env warching/openai-api",-1),_=(0,o._)("br",null,null,-1),g=(0,o._)("code",{style:{display:"block"}}," curl --location --request POST 'http://localhost/' --header 'Content-Type: application/json' --data-raw '{ \"prompt\": \"Hi\" }' ",-1),f=(0,o._)("a",{target:"_blank",href:"https://telegram.me/botfather"},"https://telegram.me/botfather",-1),y=(0,o._)("br",null,null,-1),b=(0,o._)("br",null,null,-1),w=(0,o._)("code",{style:{display:"block","white-space":"pre-wrap",border:"solid"}},"TG_BOT_TOKEN=YOUR_BOT_TOKEN",-1),k=(0,o._)("br",null,null,-1),v=(0,o._)("code",{style:{display:"block","white-space":"pre-wrap",border:"solid"}},"docker run -d --env-file .env warching/openai-tg-bot",-1),T=(0,o._)("br",null,null,-1),I=(0,o._)("a",{target:"_blank",href:"https://portal.azure.com/#create/Microsoft.AzureBot"},"https://portal.azure.com/#create/Microsoft.AzureBot",-1),P=(0,o._)("br",null,null,-1),U=(0,o._)("br",null,null,-1),x=(0,o._)("code",{style:{display:"block","white-space":"pre-wrap",border:"solid"}},[(0,o.Uk)(" MicrosoftAppType=MultiTenant "),(0,o._)("br"),(0,o.Uk)(" MicrosoftAppId=YOUR_MICROSOFT_APP_ID "),(0,o._)("br"),(0,o.Uk)(" MicrosoftAppPassword=YOUR_MICROSOFT_APP_PASSWORD "),(0,o._)("br"),(0,o.Uk)(" MicrosoftAppTenantId=YOUR_MICROSOFT_APP_TENANT_ID ")],-1),E=(0,o._)("br",null,null,-1),S=(0,o._)("code",{style:{display:"block","white-space":"pre-wrap"}},"docker run -d -p 3978:3978 --env-file .env warching/openai-teams-bot",-1),O=(0,o._)("br",null,null,-1),C=(0,o._)("code",{style:{display:"block","white-space":"pre-wrap"}},"npx localtunnel --port 3978",-1),A=(0,o._)("br",null,null,-1),W=(0,o._)("br",null,null,-1),$=(0,o._)("br",null,null,-1),q=(0,o._)("br",null,null,-1),R=(0,o._)("br",null,null,-1);function H(e,t,n,H,Z,N){const M=(0,o.up)("q-tab"),z=(0,o.up)("q-tabs"),L=(0,o.up)("q-separator"),D=(0,o.up)("q-input"),V=(0,o.up)("q-btn"),j=(0,o.up)("q-stepper-navigation"),Q=(0,o.up)("q-step"),B=(0,o.up)("q-stepper"),G=(0,o.up)("q-tab-panel"),F=(0,o.up)("q-img"),Y=(0,o.up)("q-tab-panels"),K=(0,o.up)("q-card"),J=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(J,{class:"q-pa-md"},{default:(0,o.w5)((()=>[l,(0,o._)("div",p,[(0,o.Wm)(K,null,{default:(0,o.w5)((()=>[(0,o.Wm)(z,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=t=>e.tab=t),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:(0,o.w5)((()=>[(0,o.Wm)(M,{name:"html",label:"HTML"}),(0,o.Wm)(M,{name:"bot",label:"API & Bots"})])),_:1},8,["modelValue"]),(0,o.Wm)(L),(0,o.Wm)(Y,{modelValue:e.tab,"onUpdate:modelValue":t[15]||(t[15]=t=>e.tab=t),animated:""},{default:(0,o.w5)((()=>[(0,o.Wm)(G,{name:"html"},{default:(0,o.w5)((()=>[(0,o.Wm)(B,{modelValue:e.step1,"onUpdate:modelValue":t[7]||(t[7]=t=>e.step1=t),"header-nav":"",vertical:"",color:"primary",animated:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Q,{name:1,title:"Generate HTML",icon:"settings",done:e.step1>1},{default:(0,o.w5)((()=>[i,(0,o.Wm)(D,{modelValue:e.htmlPrompt,"onUpdate:modelValue":t[1]||(t[1]=t=>e.htmlPrompt=t),filled:"",type:"textarea",hint:"HTML Generator Prompt",autogrow:""},null,8,["modelValue"]),(0,o.Wm)(j,null,{default:(0,o.w5)((()=>[(0,o.Wm)(V,{onClick:t[2]||(t[2]=t=>{e.fetchHtml(e.htmlPrompt),e.step1=2}),color:"primary",label:"Generate HTML and Continue"})])),_:1})])),_:1},8,["done"]),(0,o.Wm)(Q,{name:2,title:"Download HTML",icon:"download",done:e.step1>2},{default:(0,o.w5)((()=>[r,(0,o.Wm)(D,{modelValue:e.html,"onUpdate:modelValue":t[3]||(t[3]=t=>e.html=t),filled:"",type:"textarea",hint:"HTML",autogrow:""},null,8,["modelValue"]),(0,o.Wm)(j,null,{default:(0,o.w5)((()=>[(0,o.Wm)(V,{onClick:t[4]||(t[4]=t=>e.downloadHtml()),color:"primary",label:"Download HTML"}),(0,o.Wm)(V,{onClick:t[5]||(t[5]=t=>{e.deployHtml(),e.step1=3}),color:"primary",label:"Deploy",class:"q-ml-sm"})])),_:1})])),_:1},8,["done"]),(0,o.Wm)(Q,{name:3,title:"Deploy",icon:"publish",done:e.step1>1},{default:(0,o.w5)((()=>[s,(0,o.Uk)(" Deployed to: "),(0,o._)("a",{href:e.htmlUrl,target:"__blank"},(0,a.zw)(e.htmlUrl),9,c),m,u,(0,o.Wm)(V,{onClick:t[6]||(t[6]=t=>e.publish()),color:"primary",label:"Publish"}),(0,o.Wm)(j)])),_:1},8,["done"])])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(G,{name:"bot"},{default:(0,o.w5)((()=>[(0,o.Wm)(B,{modelValue:e.step2,"onUpdate:modelValue":t[14]||(t[14]=t=>e.step2=t),"header-nav":"",vertical:"",color:"primary",animated:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Q,{name:1,title:"Download .env file",icon:"settings",done:e.step2>4},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{onClick:e.downloadEnv,outline:"",round:"",color:"primary",icon:"save"},null,8,["onClick"]),(0,o.Uk)(" Download the .env example, rename it to "),d,(0,o.Uk)(" and place it in the root of your project. "),(0,o.Wm)(j,null,{default:(0,o.w5)((()=>[(0,o.Wm)(V,{onClick:t[8]||(t[8]=t=>e.step=2),color:"primary",label:"Continue"})])),_:1})])),_:1},8,["done"]),(0,o.Wm)(Q,{name:2,title:"Deploy as an API",caption:"Optional",icon:"publish",done:e.step2>2},{default:(0,o.w5)((()=>[(0,o.Uk)(" 1. Run the command below: "),h,_,(0,o.Uk)(" 2. Try a sample request: "),g,(0,o.Wm)(j,null,{default:(0,o.w5)((()=>[(0,o.Wm)(V,{onClick:t[9]||(t[9]=t=>e.step1=3),color:"primary",label:"Continue"}),(0,o.Wm)(V,{flat:"",onClick:t[10]||(t[10]=t=>e.step1=1),color:"primary",label:"Back",class:"q-ml-sm"})])),_:1})])),_:1},8,["done"]),(0,o.Wm)(Q,{name:3,title:"Deploy as a Telegram Chatbot",caption:"Optional",icon:"publish",done:e.step2>3},{default:(0,o.w5)((()=>[(0,o.Uk)(" 1. Create a new Telegram bot with BotFather: "),f,y,b,(0,o.Uk)(" 2. Add your bot token to the .env file "),w,k,(0,o.Uk)(" 3. Run the command below: "),v,T,(0,o.Uk)(" 4. Try to message the chatbot in Telegram "),(0,o.Wm)(j,null,{default:(0,o.w5)((()=>[(0,o.Wm)(V,{onClick:t[11]||(t[11]=t=>e.step=4),color:"primary",label:"Continue"}),(0,o.Wm)(V,{flat:"",onClick:t[12]||(t[12]=t=>e.step=2),color:"primary",label:"Back",class:"q-ml-sm"})])),_:1})])),_:1},8,["done"]),(0,o.Wm)(Q,{name:4,title:"Deploy as a Microsoft Teams Chatbot",caption:"Optional",icon:"publish",done:e.step2>4},{default:(0,o.w5)((()=>[(0,o.Uk)(" 1. Create a new Azure Bot Service: "),I,P,U,(0,o.Uk)(" 2. Add the variables below to the .env file "),x,E,(0,o.Uk)(" 3. Run the command below: "),S,O,(0,o.Uk)(" 4. Exposes your localhost: "),C,A,(0,o.Uk)(" 5. Add the exposed url to the Azure Bot Configuration "),(0,o.Wm)(F,{src:"https://github.com/somethingwentwell/openai-botframework/raw/0f660a1c241650b63880edea64741170e3029399/img/appid_pw.png"}),W,$,(0,o.Uk)(" 6. Enable the Teams Channel "),(0,o.Wm)(F,{src:"https://github.com/somethingwentwell/openai-botframework/raw/main/img/teamschannel.png"}),q,R,(0,o.Uk)(" 7. Open the Teams Channel and try to message the chatbot "),(0,o.Wm)(F,{src:"https://github.com/somethingwentwell/openai-botframework/raw/main/img/openinteams.png"}),(0,o.Wm)(j,null,{default:(0,o.w5)((()=>[(0,o.Wm)(V,{flat:"",onClick:t[13]||(t[13]=t=>e.step=3),color:"primary",label:"Back",class:"q-ml-sm"})])),_:1})])),_:1},8,["done"])])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["modelValue"])])),_:1})])])),_:1})}var Z=n(499),N=n(8341),M=n(6950),z=n(9302),L=n(1816),D=n(4747),V=function(e,t,n,o){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,l){function p(e){try{r(o.next(e))}catch(t){l(t)}}function i(e){try{r(o["throw"](e))}catch(t){l(t)}}function r(e){e.done?n(e.value):a(e.value).then(p,i)}r((o=o.apply(e,t||[])).next())}))};const j=(0,o.aZ)({name:"IndexPage",components:{},setup(){const e=(0,z.Z)(),t=(0,N.s)();console.log(t.gpt);let n=`\n\t  create a static html page using jquery and semantic-ui with the following requirements:\n      (1) The page must be responsive\n      (2) The title of this page is ${t.gpt.title}\n      (3) Hardcode the following text in preprompt variable and should not be shown in the UI:\n      ${t.gpt.preprompt.replace(/\n/g,"\\n")}\n\t  (4) create a input field for AzureOpenAIServiceName, OpenAIKey. \n      (5) create a textarea field Prompt. Prompt field is optional to fill.\n\t  (6) create a submit button\n\t  (7) on click submit button, API post https://{{AzureOpenAIServiceName}}.openai.azure.com/openai/deployments/${t.gpt.engine}/completions?api-version=2022-12-01, the request and response text as below\n\t  <REQUEST-HEADER>\n\t  "api-key": {{OpenAIKey}}\n\t  "Content-Type": "application/json"\n\t  <REQUEST-HEADER>\n\t  <REQUEST-START>\n\t  {\n\t      "prompt": {{preprompt}}+{{Prompt}},\n\t      "max_tokens": ${t.gpt.max_tokens},\n\t      "temperature": ${t.gpt.temperature},\n\t      "frequency_penalty": ${t.gpt.frequency_penalty},\n\t      "presence_penalty": ${t.gpt.presence_penalty},\n\t      "top_p": ${t.gpt.top_p},\n\t      "stop": ${t.gpt.stop?t.gpt.stop:null}\n\t  }\n\t  <REQUEST-END>\n\t  <RESPONSE-START>\n\t  {\n        "id": "cmpl-6uHrFWUvfg4jSSqLvjef5ADza8mST",\n        "object": "text_completion",\n        "created": 1678873033,\n            "model": "text-davinci-003",\n        "choices": [\n            {\n                "text": ${t.gpt.result.replace(/\n/g,"\\n")},\n                    "index": 0,\n                    "finish_reason": "stop",\n                    "logprobs": null\n                }\n            ],\n            "usage": {\n                "completion_tokens": 591,\n                "prompt_tokens": 195,\n                "total_tokens": 786\n            }\n\t  }\n\t  <RESPONSE-END>\n      (8) use fetch async call the api and await store the response.choices[0].text in result variable\n      (9) show loading on api call start, hide loading on api call end\n      (10) display the result variable in textarea\n\t\n\t\n\t      <!DOCTYPE html>`;const o=()=>{let e=`ENGINE=${t.gpt.engine}\n`;e+=`MAX_TOKENS=${t.gpt.max_tokens}\n`,e+=`TEMPERATURE=${t.gpt.temperature}\n`,e+=`FREQUENCY_PENALTY=${t.gpt.frequency_penalty}\n`,e+=`PRESENCE_PENALTY=${t.gpt.presence_penalty}\n`,e+=`TOP_P=${t.gpt.top_p}\n`,e+=`STOP=[${t.gpt.stop?t.gpt.stop.join(","):""}]\n`,e+=`PREPROMPT='${t.gpt.preprompt}'\n`,e+=`OPENAI_NAME=${t.apiInfo.azure_openai_name}\n`,e+=`OPENAI_API_TYPE=${t.apiInfo.api_type}\n`,e+=`OPENAI_API_VERSION=${t.apiInfo.api_version}\n`,e+=`OPENAI_API_KEY=${t.apiInfo.api_key}\n`;const n=new Blob([e],{type:"text/plain"}),o=URL.createObjectURL(n),a=document.createElement("a");a.href=o,a.download=".env",a.click(),URL.revokeObjectURL(o)};let a=(0,Z.iH)("");const l=e=>V(this,void 0,void 0,(function*(){M.Z.show(),a.value=yield t.fetchHtmlCode(e),M.Z.hide()}));let p=(0,Z.iH)(`https://openaiweb.blob.core.windows.net/site/${t.promptId}.html`);const i=()=>V(this,void 0,void 0,(function*(){M.Z.show();const e="https://openaiweb.blob.core.windows.net",n="site",o=`${t.promptId}.html`,l="sv=2021-12-02&ss=b&srt=co&sp=rwlaciytfx&se=2024-03-16T13:41:23Z&st=2023-03-16T05:41:23Z&spr=https,http&sig=JIYdlCk8xarepzhiZK969FpSdjVp%2FwH6M4dLfa7CkGM%3D",i=`${e}/${n}/${o}?${l}`,r=yield fetch(i,{method:"PUT",body:a.value,headers:{"Content-Type":"text/html; charset=UTF-8","x-ms-blob-type":"BlockBlob","x-ms-version":"2021-12-02"}});console.log(`HTML file uploaded to ${r.url.split("?")[0]}`),p.value=r.url.split("?")[0],M.Z.hide()})),r=()=>{const e=new Blob([a.value],{type:"text/html"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="index.html",n.click(),URL.revokeObjectURL(t)},s=()=>V(this,void 0,void 0,(function*(){M.Z.show();const n={title:t.gpt.title,url:p.value,tags:t.gpt.tags};(0,D.Vx)((0,D.iU)((0,D.iH)(L.N$),"webs/"+t.promptId),n),M.Z.hide(),e.dialog({title:"Published",message:t.gpt.title+" is published successfully!"}).onOk((()=>{window.location.href="/#/webs"}))}));return{oai:t,downloadEnv:o,downloadHtml:r,step1:(0,Z.iH)(1),step2:(0,Z.iH)(1),tab:(0,Z.iH)("html"),htmlPrompt:n,html:a,fetchHtml:l,deployHtml:i,htmlUrl:p,publish:s}}});var Q=n(1639),B=n(9885),G=n(4458),F=n(7817),Y=n(900),K=n(926),J=n(9800),X=n(4106),ee=n(8225),te=n(8335),ne=n(6611),oe=n(1992),ae=n(4455),le=n(335),pe=n(9984),ie=n.n(pe);const re=(0,Q.Z)(j,[["render",H]]),se=re;ie()(j,"components",{QPage:B.Z,QCard:G.Z,QTabs:F.Z,QTab:Y.Z,QSeparator:K.Z,QTabPanels:J.Z,QTabPanel:X.Z,QStepper:ee.Z,QStep:te.Z,QInput:ne.Z,QStepperNavigation:oe.Z,QBtn:ae.Z,QImg:le.Z})}}]);